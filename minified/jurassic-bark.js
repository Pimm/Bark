'use strict';(function(o){function k(){}function g(a,b,d){this.f=void 0===(this.j=b)?this.c=a:i(this.c=a,b);this.e=d}function p(a){delete a.c;delete a.f;delete a.j;a.destroy=k}function l(a){this.e=a}function m(a,b){this.l=a;this.m=b}function j(a){this.a=void 0===a?this:a;this.d={}}var h=!1,n={},i=function(){return k.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){a.apply(b,arguments)}}}();g.prototype.add=function(a,b,d){return new m(this,this.e.add(a,b,d))};var q=function(){return!0==
h||[].lastIndexOf?function(a,b){return a.lastIndexOf(b)}:function(a,b){for(var d=a.length;-1!=d;d--)if(a[d]===b)return d;return-1}}();g.prototype.destroy=function(){p(this.n.splice(q(this.n,this),1)[0])};g.prototype.destroyOnUse=function(){var a=this,b=this.f;this.f=function(){a.destroy();b.call(this)};return a};l.prototype={add:function(a,b,d){return this.e.add(a,b,d)},destroy:k,destroyOnUse:function(){return this}};m.prototype={add:function(a,b,d){return new m(this.l,this.m.add(a,b,d))},destroy:function(){this.l.destroy();
this.m.destroy()},destroyOnUse:function(){this.l.destroyOnUse();this.m.destroyOnUse();return this}};j.prototype.add=function(a,b,d){if(null===b)return this.h?this.h:this.h=new l(this);var c=n[a]?this.d[a="e-"+a]:this.d[a],e;if(c){for(a=0;a<c.length;a++)if(c[a].c==b&&(e=c[a]).j===d)return e;c.push(e=new g(b,d,this))}else c=this.d[a]=[e=new g(b,d,this)];e.n=c;return e};j.prototype.emit=function(a){var b=n[a]?this.d[a="e-"+a]:this.d[a];if(b){var d=1==arguments.length?[]:b.slice.call(arguments,1);if(1==
b.length)b[0].f.apply(this.a,d);else if(b.length)for(var b=b.slice(0),c=0;c<b.length;c++)b[c].f.apply(this.a,d)}return this.o?this.o:this.o={emit:i(this.emit,this)}};j.prototype.remove=function(a,b,d){if(a=n[a]?this.d["e-"+a]:this.d[a])for(var c=0;c<a.length;c++)if(a[c].c==b&&a[c].j===d){p(a.splice(c,1)[0]);break}return this.i?this.i:this.i={remove:i(this.remove,this)}};var r=function(){function a(a,b,e){this.g=a;this.c=b;this.e=e}function b(a){this.b=[];this.a=a}a.prototype.add=g.prototype.add;a.prototype.destroy=
function(){this.e.a.removeEventListener(this.g,this.k?this.k:this.c,h);delete this.c};a.prototype.destroyOnUse=function(){function a(){b.destroy();b.e.a.removeEventListener(b.g,a,h)}var b=this;b.e.a.addEventListener(b.g,a,h);return b};b.prototype.add=function(b,c,e){if(null===c)return this.h?this.h:this.h=new l(this);var f=new a(b,c,this);if(!(void 0===e||this.a===e)){for(var g=0;g<this.b.length;g++)if(this.b[g].c==c&&this.b[g].g==b&&(f=this.b[g]).j===e)return f;c=f.k=i(c,f.scope=e);this.b.push(f)}this.a.addEventListener(b,
c,h);return f};b.prototype.remove=function(a,b,e){if(!(void 0===e||this.a===e))for(var f=0;f<this.b.length;f++)if(this.b[f].c==b&&this.b[f].g==a&&this.b[f].scope===e){this.a.removeEventListener(a,this.b.splice(f,1)[0].k,h);break}this.a.removeEventListener(a,b,h);return this.i?this.i:this.i={remove:i(this.remove,this)}};return b}();o.EventEmitter=j;o.HTMLEventEmitter=r})(this);
