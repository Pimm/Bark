'use strict';(function(i){function h(){}function e(a){this.a={};this.d=void 0===a?this:a}function f(a,b){this.f=a;this.g=b;this.b=null===b?a:j(a,b)}var g={},j=function(){return h.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){a.apply(b,arguments)}}}(),k=function(){return[].lastIndexOf?function(a,b){return a.lastIndexOf(b)}:function(a,b){for(var c=a.length;-1!=c;c--)if(a[c]===b)return c;return-1}}();f.prototype.destroy=function(){var a=k(this.e,this);-1!=a&&(this.e.splice(a,1),
delete this.f,delete this.g,delete this.b,delete this.e,this.destroy=h)};f.prototype.destroyOnUse=function(){var a=this,b=this.b;this.b=function(){b.call(this);a.destroy()};return a};e.prototype.add=function(a,b,c){void 0===c&&(c=this==this.d?null:this.d);var d=g[a]?this.a[a="event-type-"+a]:this.a[a];if(d){for(var e=0;e<d.length;e++)if(d[e].f==b&&(a=d[e],a.g===c))return a;d.push(a=new f(b,c))}else d=this.a[a]=[a=new f(b,c)];a.e=d;return a};e.prototype.emit=function(a){if(a=g[a]?this.a["event-type-"+
a]:this.a[a]){if(1==a.length)this.c=a[0].b,this.c();else if(a.length)for(var a=a.slice(0),b=0;b<a.length;b++)this.c=a[b].b,this.c();delete this.c}};e.prototype.remove=function(a,b,c){void 0===c&&(c=this==this.d?null:this.d);if(a=g[a]?this.a["event-type-"+a]:this.a[a])for(var d=0;d<a.length;d++)if(a[d].f==b&&a[d].g===c){a.splice(d,1);break}};i.EventEmitter=e})(this);
